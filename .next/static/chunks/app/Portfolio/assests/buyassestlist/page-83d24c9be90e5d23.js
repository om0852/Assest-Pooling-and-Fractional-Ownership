(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[263],{9803:function(e,t,s){Promise.resolve().then(s.bind(s,922))},922:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Main}});var n=s(7437),l=s(4033),r=s(2265);s(1396);var a=s(171);s(9145);var i=s(9460);function Main(){let e=(0,l.useRouter)(),[t,s]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[d,p]=(0,r.useState)(""),[h,u]=(0,r.useState)(!1),[x,m]=(0,r.useState)(null),w=0,fetchdata=async()=>{let e=localStorage.getItem("APFOS_useremail"),t=await fetch("".concat("http://localhost:3000/","api/portfolio/Assest/BuyAssestList"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await t.json();p(s.error)},handleDeleteCart=e=>{u(!0)};(0,r.useEffect)(()=>{window.ethereum&&window.ethereum.on("accountsChanged",handleAccountsChanged),setContract()},[]);let handleAccountsChanged=async e=>{setsender(e[0])},fetchEthereumPrice=async()=>{try{let e=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=inr"),t=await e.json();return t.ethereum.inr}catch(e){console.error("Error fetching Ethereum price:",e)}},setContract=async()=>{try{let e=new i.ZPm(window.ethereum);c(e),await window.ethereum.request({method:"eth_requestAccounts"}),console.log(ASPOS);let t=new e.eth.Contract([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"id",type:"string"}],name:"deposit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"string",name:"id",type:"string"}],name:"getBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"id",type:"string"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"address payable",name:"_receiver",type:"address"}],name:"withdraw",outputs:[],stateMutability:"payable",type:"function"}],"0x930BC5ec6339AbC9343de0b5c1b5C1b4163670c8");console.log(t),s(t)}catch(e){console.log(e),alert("connect to network")}},handleWithdraw=async()=>{try{let s;try{s=await fetchEthereumPrice()}catch(e){return alert("check internet connection,try again")}console.log(s,x.AssestBuyPrice);let n=parseFloat(x.AssestBuyPrice)/parseFloat(s)*1e18;console.log(n);let l=await window.ethereum.request({method:"eth_requestAccounts"}),r=l[0];console.log(x._id);let i=await t.methods.withdraw(x.AssestId,parseInt(n),"0xaca8Dd3EC734Db2847c016356F682e5CB7Fe7783").send({from:r,gas:2e5,gasPrice:o.utils.toWei("40","gwei")});console.log(i);let c=await fetch("".concat("http://localhost:3000/","api/portfolio/Assest/SellAssest"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:x._id,price:x.AssestBuyPrice,hash:i.transactionHash})}),d=await c.json();200==d.status?(a.toast.success("Assest Sell Successfully",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),window.location.reload()):a.toast.error("Trnsaction Failed ,Try Again",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),e.push("/Portfolio/assests/buyassestlist")}catch(e){return console.log(e),alert("invalid attempt,try again")}};return(0,r.useEffect)(()=>{fetchdata()},[]),(0,n.jsxs)("div",{className:"mx-auto m-4 md:m-8 md:px-16 px-2 h-screen",children:[h&&(0,n.jsxs)("div",{class:"fixed top-32 left-[10%] md:left-[30%] lg:left-[40%]  z-50 flex flex-col bg-clip-border rounded-xl bg-gradient-to-tr from-blue-900 to-gray-800 text-white shadow-gray-900/20 shadow-md w-full max-w-[20rem] p-3",children:[(0,n.jsx)("div",{className:"mb-6 md:mb-0 flex flex-row justify-content-center justify-center my-2",children:(0,n.jsxs)("p",{className:"text-2xl text-center text-white font-bold ml-3 bg-red-500 w-auto h-auto py-1 pr-2",children:[(0,n.jsx)("span",{className:" bg-black text-white px-2 py-1",children:"Bluechip"})," ","Art"," "]})}),(0,n.jsx)("div",{class:"py-6",children:(0,n.jsxs)("ul",{class:"flex flex-col gap-4 ",children:[(0,n.jsxs)("li",{class:"flex items-center gap-4",children:[(0,n.jsx)("span",{class:"p-1 border rounded-full border-white/20 bg-white/20",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-3 h-3",children:(0,n.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})})}),(0,n.jsxs)("p",{class:"block font-sans text-base antialiased font-normal leading-relaxed text-inherit",children:["Title:",x?x.AssestTitle:"N/A"]})]}),(0,n.jsxs)("li",{class:"flex items-center gap-4",children:[(0,n.jsx)("span",{class:"p-1 border rounded-full border-white/20 bg-white/20",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-3 h-3",children:(0,n.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})})}),(0,n.jsxs)("p",{class:"block font-sans text-base antialiased font-normal leading-relaxed text-inherit",children:["Profit:",x?x.AssestBuyPrice-x.OrginalBuyPrice:"N/A"]})]}),(0,n.jsxs)("li",{class:"flex items-center gap-4",children:[(0,n.jsx)("span",{class:"p-1 border rounded-full border-white/20 bg-white/20",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-3 h-3",children:(0,n.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})})}),(0,n.jsxs)("p",{class:"block font-sans text-base antialiased font-normal leading-relaxed text-inherit",children:["Buy Price:",x?x.OrginalBuyPrice:"N/A"]})]}),(0,n.jsxs)("li",{class:"flex items-center gap-4",children:[(0,n.jsx)("span",{class:"p-1 border rounded-full border-white/20 bg-white/20",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-3 h-3",children:(0,n.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})})}),(0,n.jsxs)("p",{class:"block font-sans text-base antialiased font-normal leading-relaxed text-inherit",children:["Sell Price:",x?x.AssestBuyPrice:"N/A"]})]}),(0,n.jsxs)("li",{class:"flex items-center gap-4",children:[(0,n.jsx)("span",{class:"p-1 border rounded-full border-white/20 bg-white/20",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-3 h-3",children:(0,n.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})})}),(0,n.jsx)("p",{class:"block font-sans text-base antialiased font-normal leading-relaxed text-inherit",children:"Life time technical support"})]})]})}),(0,n.jsxs)("div",{class:"flex w-full flex-row justify-center items-center",children:[(0,n.jsx)("button",{onClick:handleWithdraw,className:"w-[50%] text-white bg-blue-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm m-2 px-3 py-2.5 text-center ",children:"Sell"}),(0,n.jsx)("button",{onClick:()=>{u(!1)},className:"w-[50%] text-white bg-blue-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm m-2 px-3 py-2.5 text-center ",children:"Cancel"})]})]}),(0,n.jsx)("h1",{className:"mx-auto bg-white p-2 rounded w-fit text-3xl font-semibold mb-4",children:"All Assets"}),(0,n.jsx)("div",{className:" bg-white shadow-md rounded-lg md:overflow-hidden overflow-scroll",children:(0,n.jsx)("div",{className:"relative overflow-x-auto overflow-y-hidden",children:(0,n.jsxs)("table",{className:"w-full px-4 text-md text-left  text-black ",children:[(0,n.jsx)("thead",{className:"text-md text-white uppercase bg-blue-400 ",children:(0,n.jsxs)("tr",{className:"",children:[(0,n.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Asset Name"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Invest Amount"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Current Price                "}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Sell"})]})}),(0,n.jsxs)("tbody",{children:[d&&d.map(e=>(0,n.jsxs)("tr",{className:"bg-white border-b ",children:[(0,n.jsxs)("td",{scope:"row",className:"px-6 py-4  text-gray-900 whitespace-nowrap ",children:[(0,n.jsx)("p",{className:"text-lg font-semibold",children:e.AssestTitle}),(0,n.jsx)("p",{className:"text-gray-500",children:"Lorem ipsum dolor sit amet"})]}),(0,n.jsx)("td",{className:"px-6 py-4",children:e.OrginalBuyPrice}),(0,n.jsx)("td",{className:"px-6 py-4",children:e.AssestBuyPrice}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)("button",{onClick:()=>{handleDeleteCart(e),m(e)},className:"text-red-500 border py-1 px-2 rounded hover:text-red-700 hover:font-bold focus:outline-none",children:"Sell"})})]},e._id)),(0,n.jsxs)("tr",{className:"bg-white border-b ",children:[(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsxs)("p",{className:"text-lg font-semibold",children:["Assets:",d&&d.length]})}),(0,n.jsxs)("td",{className:"px-6 py-4",children:[d&&d.forEach(e=>{w+=parseFloat(e.OrginalBuyPrice)}),(0,n.jsxs)("p",{className:"text-lg font-semibold",children:["Total Assests Price:",w]})]}),(0,n.jsx)("td",{className:"px-6 py-4"})]})]})]})})})]})}},9145:function(){}},function(e){e.O(0,[724,113,492,971,864,744],function(){return e(e.s=9803)}),_N_E=e.O()}]);