(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[825],{5080:function(e,t,r){Promise.resolve().then(r.bind(r,8419))},8419:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Main}});var s=r(7437),o=r(4033),n=r(2265),a=r(1396),i=r.n(a),l=r(3771);function Main(){var e=0,t=0,r=0;let[a,c]=(0,n.useState)({prev:"",curr:"",rem:""}),[d,p]=(0,n.useState)({AType:"",Assest_Title:"",Assest_Price:"",Assest_Quantity:"",Assest_Description:""});(0,n.useEffect)(()=>{if(localStorage.getItem("token")){let e=localStorage.getItem("token").toString(),t=(0,l.jwtDecode)(e);console.log(t),new Date/1e3>t.exp?(alert("Your session has been expired."),localStorage.removeItem("token"),f.push("/login")):("user"==t.role&&fetchdata(),"admin"==t.role&&f.push("/dashboard"))}else f.push("/login")},[]);let f=(0,o.useRouter)(),[h,x]=(0,n.useState)(""),fetchdata=async()=>{let e=window.location.search,t=new URLSearchParams(e),r=t.get("pid"),s=await fetch("".concat("http://localhost:3000/","api/portfolio/portfoliodetails"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({pid:r})}),o=await s.json();console.log("response.error"),x(o.error),c({prev:o.error.PortfolioPrice[o.error.PortfolioPrice.length-2]&&o.error.PortfolioPrice[o.error.PortfolioPrice.length-2].Price,curr:o.error.PortfolioPrice[o.error.PortfolioPrice.length-1]&&o.error.PortfolioPrice[o.error.PortfolioPrice.length-1].Price,rem:o.error.RemainingPrice})};return(0,s.jsxs)("div",{className:" w-[100%] h-screen rounded p-2 pb-4 md:px-16",children:[(0,s.jsx)("div",{className:"flex justify-center items-center my-2 mb-4",children:(0,s.jsxs)("span",{className:"text-white text-lg font-bold",children:["Portfolio of ",h.PortfolioName]})}),(0,s.jsxs)("div",{className:" shadow-md rounded md:overflow-hidden overflow-scroll",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-center my-2 mt-4",children:[(0,s.jsxs)("span",{className:"text-md font-bold m-2 px-2 py-2 rounded bg-orange-700 text-white",children:["Previous:",a.prev?a.prev:"Not Available"]}),(0,s.jsxs)("span",{className:"text-md font-bold m-2 px-2 py-2 rounded bg-green-700 text-white",children:["Current:",a.curr?a.curr:"Not Available"]}),(0,s.jsxs)("span",{className:"text-md font-bold m-2 px-2 py-2 rounded bg-pink-700 text-white",children:["Remaining:",Math.round(h.RemainingPrice)]})]}),(0,s.jsx)("div",{className:"flex flex-col items-center justify-center my-2 ",children:(0,s.jsx)(i(),{href:"/Portfolio/assests/buyassest?pid=".concat(h._id),className:"text-md font-bold m-2 px-3 py-2 rounded bg-blue-700 text-white",children:"Buy"})}),(0,s.jsx)("div",{className:"relative rounded-lg overflow-x-auto overflow-y-hidden",children:(0,s.jsxs)("table",{className:"w-full  px-4 text-md text-left  text-black ",children:[(0,s.jsx)("thead",{className:"text-md  text-white uppercase bg-blue-400 ",children:(0,s.jsxs)("tr",{className:"",children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Asset Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Asset Type"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Price"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Quantity"})]})}),(0,s.jsxs)("tbody",{children:[h.Assests&&h.Assests.map((o,n)=>(e+=parseInt(o.Assest_Price),t+=parseInt(o.Assest_Quantity),r=n+1,(0,s.jsxs)("tr",{className:"bg-white border-b ",children:[(0,s.jsxs)("td",{scope:"row",className:"px-6 py-4  text-gray-900 whitespace-nowrap ",children:[(0,s.jsx)("p",{className:"text-lg font-semibold",children:o.Assest_Title}),(0,s.jsx)("p",{className:"text-gray-500",children:o.Assest_Description})]}),(0,s.jsx)("td",{scope:"row",className:"px-6 py-4  text-gray-900 whitespace-nowrap ",children:o.AType}),(0,s.jsx)("td",{className:"px-6 py-4",children:o.Assest_Price}),(0,s.jsx)("td",{className:"px-6 py-4 text-center",children:(0,s.jsx)("p",{className:"w-16 border rounded-md py-1 px-2 focus:outline-none",children:o.Assest_Quantity})})]},n))),(0,s.jsxs)("tr",{className:"bg-white border-b ",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("p",{className:"text-lg font-semibold",children:["Assets:",r]})}),(0,s.jsx)("td",{className:"px-6 py-4"}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("p",{className:"text-lg font-semibold",children:["Price:",e]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("p",{className:"font-semibold py-1 px-2 ",children:["Quantity:",t]})})]})]})]})}),(0,s.jsx)("div",{className:"flex flex-col items-center justify-center my-2 ",children:(0,s.jsx)(i(),{href:"/Portfolio/assests/buyassest?pid=${portfoliodata._id}",className:"text-md font-bold m-2 px-3 py-2 rounded bg-blue-700 text-white",children:"Buy"})})]})]})}},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(2265),o=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var s,n={},c=null,d=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,s)&&!l.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:o,type:e,key:c,ref:d,props:n,_owner:i.current}}t.Fragment=n,t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)},1396:function(e,t,r){e.exports=r(4724)},4033:function(e,t,r){e.exports=r(290)},3771:function(e,t,r){"use strict";r.r(t),r.d(t,{InvalidTokenError:function(){return InvalidTokenError},jwtDecode:function(){return jwtDecode}});let InvalidTokenError=class InvalidTokenError extends Error{};function jwtDecode(e,t){let r;if("string"!=typeof e)throw new InvalidTokenError("Invalid token specified: must be a string");t||(t={});let s=!0===t.header?0:1,o=e.split(".")[s];if("string"!=typeof o)throw new InvalidTokenError(`Invalid token specified: missing part #${s+1}`);try{r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var r;return r=t,decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch(e){return atob(t)}}(o)}catch(e){throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${s+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new InvalidTokenError(`Invalid token specified: invalid json for part #${s+1} (${e.message})`)}}InvalidTokenError.prototype.name="InvalidTokenError"}},function(e){e.O(0,[724,971,864,744],function(){return e(e.s=5080)}),_N_E=e.O()}]);