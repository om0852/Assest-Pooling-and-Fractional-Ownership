(()=>{var e={};e.id=5263,e.ids=[5263],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},76737:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>p,routeModule:()=>x,tree:()=>d});var r=s(73137),n=s(54647),i=s(4183),a=s.n(i),l=s(71775),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=r.AppPageRouteModule,d=["",{children:["Portfolio",{children:["assests",{children:["buyassestlist",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,55097)),"D:\\Assest-Pooling-and-Fractional-Ownershi\\src\\app\\Portfolio\\assests\\buyassestlist\\page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,27415)),"D:\\Assest-Pooling-and-Fractional-Ownershi\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"]}],p=["D:\\Assest-Pooling-and-Fractional-Ownershi\\src\\app\\Portfolio\\assests\\buyassestlist\\page.js"],u="/Portfolio/assests/buyassestlist/page",h={require:s,loadChunk:()=>Promise.resolve()},x=new c({definition:{kind:n.x.APP_PAGE,page:"/Portfolio/assests/buyassestlist/page",pathname:"/Portfolio/assests/buyassestlist",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},31659:(e,t,s)=>{Promise.resolve().then(s.bind(s,75487))},75487:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Main});var r=s(60080),n=s(57114),i=s(9885);s(11440);var a=s(34751);s(71115);var l=s(282);function Main(){let e=(0,n.useRouter)(),[t,s]=(0,i.useState)(null),[o,c]=(0,i.useState)(null),[d,p]=(0,i.useState)(""),[u,h]=(0,i.useState)(!1),[x,m]=(0,i.useState)(null),g=0,fetchdata=async()=>{let e=localStorage.getItem("APFOS_useremail"),t=await fetch("http://localhost:3000/api/portfolio/Assest/BuyAssestList",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await t.json();p(s.error)},handleDeleteCart=e=>{h(!0)};(0,i.useEffect)(()=>{window.ethereum&&window.ethereum.on("accountsChanged",handleAccountsChanged),setContract()},[]);let handleAccountsChanged=async e=>{setsender(e[0])},fetchEthereumPrice=async()=>{try{let e=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=inr"),t=await e.json();return t.ethereum.inr}catch(e){console.error("Error fetching Ethereum price:",e)}},setContract=async()=>{try{let e=new l.ZPm(window.ethereum);c(e),await window.ethereum.request({method:"eth_requestAccounts"}),console.log(ASPOS);let t=new e.eth.Contract([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"id",type:"string"}],name:"deposit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"string",name:"id",type:"string"}],name:"getBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"id",type:"string"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"address payable",name:"_receiver",type:"address"}],name:"withdraw",outputs:[],stateMutability:"payable",type:"function"}],"0x930BC5ec6339AbC9343de0b5c1b5C1b4163670c8");console.log(t),s(t)}catch(e){console.log(e),alert("connect to network")}},handleWithdraw=async()=>{try{let s;try{s=await fetchEthereumPrice()}catch(e){return alert("check internet connection,try again")}console.log(s,x.AssestBuyPrice);let r=parseFloat(x.AssestBuyPrice)/parseFloat(s)*1e18;console.log(r);let n=await window.ethereum.request({method:"eth_requestAccounts"}),i=n[0];console.log(x._id);let l=await t.methods.withdraw(x.AssestId,parseInt(r),"0xaca8Dd3EC734Db2847c016356F682e5CB7Fe7783").send({from:i,gas:2e5,gasPrice:o.utils.toWei("40","gwei")});console.log(l);let c=await fetch("http://localhost:3000/api/portfolio/Assest/SellAssest",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:x._id,price:x.AssestBuyPrice,hash:l.transactionHash})}),d=await c.json();200==d.status?(a.toast.success("Assest Sell Successfully",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),window.location.reload()):a.toast.error("Trnsaction Failed ,Try Again",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),e.push("/Portfolio/assests/buyassestlist")}catch(e){return console.log(e),alert("invalid attempt,try again")}};return(0,i.useEffect)(()=>{fetchdata()},[]),(0,r.jsxs)("div",{className:"mx-auto m-4 md:m-8 md:px-16 px-2 h-screen",children:[u&&(0,r.jsxs)("div",{class:"fixed top-32 left-[10%] md:left-[30%] lg:left-[40%]  z-50 flex flex-col bg-clip-border rounded-xl bg-gradient-to-tr from-blue-900 to-gray-800 text-white shadow-gray-900/20 shadow-md w-full max-w-[20rem] p-3",children:[r.jsx("div",{className:"mb-6 md:mb-0 flex flex-row justify-content-center justify-center my-2",children:(0,r.jsxs)("p",{className:"text-2xl text-center text-white font-bold ml-3 bg-red-500 w-auto h-auto py-1 pr-2",children:[r.jsx("span",{className:" bg-black text-white px-2 py-1",children:"Bluechip"})," ","Art"," "]})}),r.jsx("div",{class:"py-6",children:(0,r.jsxs)("ul",{class:"flex flex-col gap-4 ",children:[(0,r.jsxs)("li",{class:"flex items-center gap-4",children:[r.jsx("span",{class:"p-1 border rounded-full border-white/20 bg-white/20",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-3 h-3",children:r.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})})}),(0,r.jsxs)("p",{class:"block font-sans text-base antialiased font-normal leading-relaxed text-inherit",children:["Title:",x?x.AssestTitle:"N/A"]})]}),(0,r.jsxs)("li",{class:"flex items-center gap-4",children:[r.jsx("span",{class:"p-1 border rounded-full border-white/20 bg-white/20",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-3 h-3",children:r.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})})}),(0,r.jsxs)("p",{class:"block font-sans text-base antialiased font-normal leading-relaxed text-inherit",children:["Profit:",x?x.AssestBuyPrice-x.OrginalBuyPrice:"N/A"]})]}),(0,r.jsxs)("li",{class:"flex items-center gap-4",children:[r.jsx("span",{class:"p-1 border rounded-full border-white/20 bg-white/20",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-3 h-3",children:r.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})})}),(0,r.jsxs)("p",{class:"block font-sans text-base antialiased font-normal leading-relaxed text-inherit",children:["Buy Price:",x?x.OrginalBuyPrice:"N/A"]})]}),(0,r.jsxs)("li",{class:"flex items-center gap-4",children:[r.jsx("span",{class:"p-1 border rounded-full border-white/20 bg-white/20",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-3 h-3",children:r.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})})}),(0,r.jsxs)("p",{class:"block font-sans text-base antialiased font-normal leading-relaxed text-inherit",children:["Sell Price:",x?x.AssestBuyPrice:"N/A"]})]}),(0,r.jsxs)("li",{class:"flex items-center gap-4",children:[r.jsx("span",{class:"p-1 border rounded-full border-white/20 bg-white/20",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-3 h-3",children:r.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})})}),r.jsx("p",{class:"block font-sans text-base antialiased font-normal leading-relaxed text-inherit",children:"Life time technical support"})]})]})}),(0,r.jsxs)("div",{class:"flex w-full flex-row justify-center items-center",children:[r.jsx("button",{onClick:handleWithdraw,className:"w-[50%] text-white bg-blue-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm m-2 px-3 py-2.5 text-center ",children:"Sell"}),r.jsx("button",{onClick:()=>{h(!1)},className:"w-[50%] text-white bg-blue-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm m-2 px-3 py-2.5 text-center ",children:"Cancel"})]})]}),r.jsx("h1",{className:"mx-auto bg-white p-2 rounded w-fit text-3xl font-semibold mb-4",children:"All Assets"}),r.jsx("div",{className:" bg-white shadow-md rounded-lg md:overflow-hidden overflow-scroll",children:r.jsx("div",{className:"relative overflow-x-auto overflow-y-hidden",children:(0,r.jsxs)("table",{className:"w-full px-4 text-md text-left  text-black ",children:[r.jsx("thead",{className:"text-md text-white uppercase bg-blue-400 ",children:(0,r.jsxs)("tr",{className:"",children:[r.jsx("th",{scope:"col",className:"px-6 py-3",children:"Asset Name"}),r.jsx("th",{scope:"col",className:"px-6 py-3",children:"Invest Amount"}),r.jsx("th",{scope:"col",className:"px-6 py-3",children:"Current Price                "}),r.jsx("th",{scope:"col",className:"px-6 py-3",children:"Sell"})]})}),(0,r.jsxs)("tbody",{children:[d&&d.map(e=>(0,r.jsxs)("tr",{className:"bg-white border-b ",children:[(0,r.jsxs)("td",{scope:"row",className:"px-6 py-4  text-gray-900 whitespace-nowrap ",children:[r.jsx("p",{className:"text-lg font-semibold",children:e.AssestTitle}),r.jsx("p",{className:"text-gray-500",children:"Lorem ipsum dolor sit amet"})]}),r.jsx("td",{className:"px-6 py-4",children:e.OrginalBuyPrice}),r.jsx("td",{className:"px-6 py-4",children:e.AssestBuyPrice}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("button",{onClick:()=>{handleDeleteCart(e),m(e)},className:"text-red-500 border py-1 px-2 rounded hover:text-red-700 hover:font-bold focus:outline-none",children:"Sell"})})]},e._id)),(0,r.jsxs)("tr",{className:"bg-white border-b ",children:[r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("p",{className:"text-lg font-semibold",children:["Assets:",d&&d.length]})}),(0,r.jsxs)("td",{className:"px-6 py-4",children:[d&&d.forEach(e=>{g+=parseFloat(e.OrginalBuyPrice)}),(0,r.jsxs)("p",{className:"text-lg font-semibold",children:["Total Assests Price:",g]})]}),r.jsx("td",{className:"px-6 py-4"})]})]})]})})})]})}},55097:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>o});var r=s(17536);let n=(0,r.createProxy)(String.raw`D:\Assest-Pooling-and-Fractional-Ownershi\src\app\Portfolio\assests\buyassestlist\page.js`),{__esModule:i,$$typeof:a}=n,l=n.default,o=l},71115:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[4650,3254,282,4503],()=>__webpack_exec__(76737));module.exports=s})();