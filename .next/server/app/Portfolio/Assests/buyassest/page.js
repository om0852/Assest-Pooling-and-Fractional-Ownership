(()=>{var e={};e.id=5467,e.ids=[5467],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},22921:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>p,routeModule:()=>g,tree:()=>c});var r=s(73137),o=s(54647),a=s(4183),n=s.n(a),i=s(71775),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let u=r.AppPageRouteModule,c=["",{children:["Portfolio",{children:["assests",{children:["buyassest",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,89124)),"D:\\Assest-Pooling-and-Fractional-Ownershi\\src\\app\\Portfolio\\assests\\buyassest\\page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,27415)),"D:\\Assest-Pooling-and-Fractional-Ownershi\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"]}],p=["D:\\Assest-Pooling-and-Fractional-Ownershi\\src\\app\\Portfolio\\assests\\buyassest\\page.js"],d="/Portfolio/assests/buyassest/page",m={require:s,loadChunk:()=>Promise.resolve()},g=new u({definition:{kind:o.x.APP_PAGE,page:"/Portfolio/assests/buyassest/page",pathname:"/Portfolio/assests/buyassest",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},41234:(e,t,s)=>{Promise.resolve().then(s.bind(s,58280))},58280:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=s(60080),o=s(9885),a=s(57114);s(11440);var n=s(34751);s(45996);var i=s(72479),l=s(282);let __WEBPACK_DEFAULT_EXPORT__=()=>{let[e,t]=(0,o.useState)(null),[s,u]=(0,o.useState)(null),[c,p]=(0,o.useState)(null),[d,m]=(0,o.useState)(0),[g,h]=(0,o.useState)(null),y=(0,a.useRouter)(),x=i.Z.get("price");(0,o.useEffect)(()=>{window.ethereum&&window.ethereum.on("accountsChanged",handleAccountsChanged),x||y.push("/"),setContract(),fetchEthereumPrice()},[]);let handleAccountsChanged=async e=>{h(e[0])},fetchEthereumPrice=async()=>{try{let e=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=inr"),t=await e.json();return t.ethereum.inr}catch(e){console.error("Error fetching Ethereum price:",e)}},setContract=async()=>{try{let e=new l.ZPm(window.ethereum);p(e);let s=await window.ethereum.request({method:"eth_requestAccounts"});console.log(s),h(s[0]);let r=new e.eth.Contract([{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"balances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"id",type:"string"}],name:"deposit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"string",name:"id",type:"string"}],name:"getBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"id",type:"string"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"address payable",name:"_receiver",type:"address"}],name:"withdraw",outputs:[],stateMutability:"payable",type:"function"}],"0x930BC5ec6339AbC9343de0b5c1b5C1b4163670c8");console.log(r),t(r)}catch(e){alert("connect to network")}},[f,b]=(0,o.useState)({useremail:"",BuyAmount:"",pid:"",PortfolioTotalPrice:"",Transactionid:null,Transactionamount:null,OrginalBuyPrice:""}),onchange=e=>{let t=window.location.search,s=new URLSearchParams(t),r=s.get("pid"),o=localStorage.getItem("APFOS_useremail"),a=e.target.value;b({...f,useremail:o,BuyAmount:a,pid:r,PortfolioTotalPrice:x,OrginalBuyPrice:a})},BuyAssest=async t=>{if(t.preventDefault(),f.BuyAmount>1&&f.BuyAmount<=2e3)try{let s;let r=window.location.search,o=new URLSearchParams(r),a=o.get("pid");console.log(c);try{s=await fetchEthereumPrice(),console.log(s)}catch(e){return alert("check internet connection,try again")}let n=parseFloat(f.BuyAmount)/parseFloat(s);console.log(n);let i=await e.methods.deposit(a).estimateGas({from:g,value:c.utils.toWei(n.toString(),"ether")});console.log("Gas Estimation:",i);let l=await e.methods.deposit(a).send({from:g,value:c.utils.toWei(n.toString(),"ether"),gas:i});console.log(l),u(l.transactionHash),await handleSubmit(t,l,n)}catch(e){return console.log(e),clearInterval(),alert("invalid attempt,try again")}else n.toast.error("Invalid Amount [1-2000]",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})},handleSubmit=async(e,t,s)=>{e.preventDefault(),console.log(f);let r=window.location.href,o=new URL(r).hostname,a=new URL(r).protocol,l=new URL(r).port?`:${new URL(r).port}`:"",u=`${a}//${o}${l}`,c=await fetch(`${u}/api/portfolio/Assest/BuyAssest`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({useremail:f.useremail,BuyAmount:f.BuyAmount,pid:f.pid,PortfolioTotalPrice:f.PortfolioTotalPrice,OrginalBuyPrice:f.OrginalBuyPrice,Transactionid:t.transactionHash,Transactionamount:s})}),p=await c.json();console.log(p),200===p.status?(n.toast.success("Assest Buy Successfully",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),i.Z.remove("price"),y.push("/Portfolio/assests/buyassestlist")):"Account Not Found"==p.error?(n.toast.error("Account Not Found",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),y.push("/login")):"Portfolio Not Found"==p.error?(n.toast.error("Portfolio Not Found",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),y.push("/")):201===p.status?(n.toast.error("Invalid Format",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),y.push("/")):n.toast.error("Empty Field",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),b({useremail:"",walletaddress:""})};return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0",children:[r.jsx("div",{className:"mb-6 md:mb-0 flex flex-row justify-center my-2",children:(0,r.jsxs)("p",{className:"text-2xl text-center text-white font-bold ml-3 bg-red-500 w-auto h-auto py-1 -2",children:[r.jsx("span",{className:" bg-black text-white px-2 py-1",children:"Bluechip"})," Art"," "]})}),r.jsx("div",{className:"w-full bg-white rounded-lg shadow md:mt-0 sm:max-w-md xl:p-0 ",children:(0,r.jsxs)("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8",children:[r.jsx("h1",{className:"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl ",children:"Transaction Page"}),(0,r.jsxs)("form",{className:"space-y-4 md:space-y-6",method:"POST",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Enter Amount"}),r.jsx("input",{onChange:e=>onchange(e),type:"number",name:"BuyAmount",id:"BuyAmount",className:"bg-white border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5",placeholder:"min:10rs",required:"true"})]}),r.jsx("button",{onClick:e=>BuyAssest(e),type:"submit",className:"w-full text-white bg-blue-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Add"})]})]})})]})}},89124:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});var r=s(17536);let o=(0,r.createProxy)(String.raw`D:\Assest-Pooling-and-Fractional-Ownershi\src\app\Portfolio\assests\buyassest\page.js`),{__esModule:a,$$typeof:n}=o,i=o.default,l=i},45996:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[4650,3254,2479,282,4503],()=>__webpack_exec__(22921));module.exports=s})();